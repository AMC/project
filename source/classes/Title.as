package classes{		import flash.events.Event;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFormatAlign;		public class Title extends GameObject 	{		private var playBtn:Button;		private var fader:GameObject;		private var slotsBtn:Button;		private var matrixBtn:Button;		private var pokerBtn:Button;		private var backBtn:Button;				private var bgCoins:GameObject;		private var bgBars:GameObject;				private var matrixCallback:Function;		private var pokerCallback:Function;		private var slotsCallback:Function;				private var addedToStage:Boolean = false;				public function Title() 		{			bgCoins = Game.GetClass("BG_Coins") as GameObject;			bgBars = Game.GetClass("BG_Bars") as GameObject;						fader = Game.GetClass("Fader") as GameObject;			slotsBtn = new Button(Button.SLOTS);			matrixBtn = new Button(Button.MATRIX);			pokerBtn = new Button(Button.POKER);			playBtn = new Button(Button.PLAY);			backBtn = new Button(Button.BACK);						playBtn.SetOnClick(onPlay);			backBtn.SetOnClick(onBack);			matrixBtn.SetOnClick(onMatrix);			slotsBtn.SetOnClick(onSlots);			pokerBtn.SetOnClick(onPoker);						addChild(bgCoins);			addChild(bgBars);			addChild(playBtn);						playBtn.x -= 500; playBtn.y = 210;			bgCoins.x = 0; bgCoins.y = 800;			bgBars.x = 0; bgBars.y = -800;						this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);		}		private function onAddedToStage(e:Event)		{			bgCoins.moveTo(0,300,1000);			bgBars.moveTo(0,0,1000);			playBtn.moveTo(260,300,300);		}		private function onPlay()		{			addChild(fader);			addChild(matrixBtn);			addChild(pokerBtn);			addChild(slotsBtn);			addChild(backBtn);						SoundEngine.PlaySound("Click");						matrixBtn.setPosition(279,-200);			slotsBtn.setPosition(900,-200);			pokerBtn.setPosition(720,620);			backBtn.setPosition(backBtn.x, 1000);			fader.alpha = 0;						fader.fadeTo(1.0,300);			fader.fadeTo(1.0,300);			matrixBtn.moveTo(453,218,300);			slotsBtn.moveTo(102,230,300);			pokerBtn.moveTo(245,130,300);			backBtn.moveTo(303,412,300);		}		private function onBack()		{			matrixBtn.moveTo(279,-200,300);			slotsBtn.moveTo(108-500,290+500,300);			pokerBtn.moveTo(720,620,300);			fader.fadeTo(0.0,300);			backBtn.moveTo(303,900,300,onBackComplete);						SoundEngine.PlaySound("Click");		}		private function onBackComplete(o:GameObject)		{			removeChild(fader);			removeChild(matrixBtn);			removeChild(pokerBtn);			removeChild(slotsBtn);			removeChild(backBtn);		}		public function SetMatrixCallback(f:Function) { matrixCallback = f; }		public function SetPokerCallback(f:Function) { pokerCallback = f; }		public function SetSlotsCallback(f:Function) { slotsCallback = f; }				public function shatter(mode:String, callback:Function)		{			onBack();			playBtn.moveTo(mode=="matrix"?508:mode=="poker"?240:mode=="slots"?-300:0,						   mode=="matrix"?390:mode=="poker"?360:mode=="slots"?360:0, 500);			bgBars.moveTo(0,-800,500);			bgCoins.moveTo(0,800,500, callback);			fader.fadeTo(0.0,500);			SoundEngine.PlaySound("Swoosh");		}		public function Reset()		{			if (playBtn.x == -300)			{				playBtn.moveTo(260,300,500);			}			else playBtn.x = 260; playBtn.y = 300;						bgBars.moveTo(0,0,500);			bgCoins.moveTo(0,300,500);		}				private function onPoker()		{			SoundEngine.PlaySound("Click");			pokerCallback();		}		private function onSlots()		{			SoundEngine.PlaySound("Click");			slotsCallback();		}		private function onMatrix()		{			SoundEngine.PlaySound("Click");			matrixCallback();		}	}	}